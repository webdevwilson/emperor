@(project: models.Project, owner: Option[models.User], tickets: emp.util.Search.SearchResult[models.FullTicket], timeline: emp.util.Search.SearchResult[models.Event])(implicit request: AuthenticatedRequest)

@import views.html.util._

@main(title = Messages("project.with.id", project.name), currentProject = Some(project.id.get)) {
<div class="page-header">
 <h1><a class="btn" href="@controllers.routes.Project.edit(project.id.get)"><i class="icon-edit"></i></a> @Messages("project.with.id", project.name)</h1>
</div>
<div class="row-fluid">
 <div class="span3">
  <h2>@Messages("project.summary.milestones")</h2>
  <ul>
    @tickets.pager.items.map { ticket =>
     <li>@ticket.ticketId @Messages(ticket.ttype.name)</li>
    }
  </ul>
 </div>
 <div class="span6">
  <h2>@Messages("general.timeline")</h2>
  @if(timeline.pager.items.isEmpty) {
    @Messages("general.timeline.empty")
  } else {
  <ul class="unstyled events">
   @timeline.pager.items.map { event =>
   <li>
    <i class="@Messages("event.action.icon." + event.eType)"></i> @Messages("event.action", event.userRealName, Messages("event.action." + event.eType)) <a href="@controllers.routes.Ticket.item("comments", event.eKey)">@event.eKey</a>
    <blockquote>@event.content</blockquote>
    <div class="attr">@Messages("ticket.comment.attribution.prefix") <b>@event.userRealName</b> @Messages("ticket.comment.attribution.postfix", event.dateCreated)</div>
   </li>
   }
  </ul>
  }
 </div>
 <div class="span3">
  <h2>@Messages("project.summary.owner")</h2>
  @owner.map { o =>
    @o.realName
  }
 </div>
</div>
}

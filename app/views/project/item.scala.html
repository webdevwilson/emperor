@(project: models.Project, tickets: royal.ends.Search.SearchResult[models.FullTicket], timeline: royal.ends.Search.SearchResult[models.Event])(implicit request: AuthenticatedRequest)

@import views.html.util._

@main(title = Messages("project.with.id", project.name), currentProject = Some(project.id.get)) {
<div class="page-header">
 <h1><a class="btn" href="@controllers.routes.Project.edit(project.id.get)"><i class="icon-edit"></i></a> @Messages("project.with.id", project.name)</h1>
</div>
<div class="row-fluid">
 <div class="span8">
  <h2>@Messages("project.tickets.open")</h2>
  <table class="table table-bordered table-rounded table-striped ticket-search">
   <thead>
    <th>@Messages("ticket.ticket")</th>
    <th>@Messages("ticket.type")</th>
    <th>@Messages("ticket.summary")</th>
    <th>@Messages("ticket.priority")</th>
    <th>@Messages("ticket.severity")</th>
    <th>@Messages("general.actions")</th>
   </thead>
   <tbody>
    @tickets.pager.items.map { ticket =>
    <tr>
     <td style="width: 10%"><a @if(!ticket.resolution.id.isEmpty) { class="strike" } href="@controllers.routes.Ticket.item("comments", ticket.ticketId)">@ticket.ticketId</a</td>
     <td><span class="label" style="background-color: #@ticket.ttype.color">@Messages(ticket.ttype.name)</span></td>
     <td style="width: 80%"><a @if(!ticket.resolution.id.isEmpty) { class="strike" } href="@controllers.routes.Ticket.item("comments", ticket.ticketId)">@ticket.summary</a></td>
     <td><span class="label" style="background-color: #@ticket.priority.color">@Messages(ticket.severity.name)</span></td>
     <td><span class="label" style="background-color: #@ticket.severity.color">@Messages(ticket.severity.name)</span></td>
     <td style="width: 10%" class="actions">
      <div class="btn-toolbar">
       <div class="btn-group">
        <a class="btn btn-mini" href="@routes.Ticket.edit(ticket.ticketId)"><i class="icon-edit"></i> @Messages("general.edit")</a>
       </div>
      </div>
     </td>
    </tr>
    }
   </tbody>
   <tfoot>
    <tr>
     <td colspan="6">
       @pager(tickets.pager)
      </td>
     </tr>
   </tfoot>
  </table>
 </div>
 <div class="span4">
  <h2>@Messages("general.timeline")</h2>
  <ul class="unstyled events">
   @timeline.pager.items.map { event =>
    <li>
      <i class="@Messages("event.action.icon." + event.eType)"></i> @Messages("event.action", event.userRealName, Messages("event.action." + event.eType)) <a href="@controllers.routes.Ticket.item("comments", event.eKey)">@event.eKey</a>
      <blockquote>@event.content</blockquote>
      <div class="attr">@Messages("ticket.comment.attribution.prefix") <b>@event.userRealName</b> @Messages("ticket.comment.attribution.postfix", event.dateCreated)</div>
    </li>
   }
  </ul>
 </div>
</div>
}

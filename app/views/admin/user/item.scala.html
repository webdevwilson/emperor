@(user: models.User, allGroups: List[Group], userGroups: List[GroupUser])(implicit request: AuthenticatedRequest)
@main(Messages("admin.user.with.id", user.username)) {
<ul class="breadcrumb">
 <li>
  <a href="@routes.Admin.index">@Messages("general.admin")</a> <span class="divider">@Messages("breadcrumb.divider")</span>
 </li>
 <li>
  <a href="@controllers.admin.routes.User.index()">@Messages("admin.user.list")</a> <span class="divider">@Messages("breadcrumb.divider")</span>
 </li>
 <li class="active">@user.username</li>
</ul>
<h1><a class="btn" href="@controllers.admin.routes.User.edit(user.id.get)"><i class="icon-edit"></i></a> @Messages("user.with.id", user.username)</h1>
<div class="well well-small obj-info">
  XXX more here
 <div class="row">
  <div class="span4">
   <div class="info"><label>@Messages("user.username")</label><span>@user.username</span></div>
   <div class="info"><label>@Messages("user.realname")</label><span>@user.realName</span></div>
  </div>
 </div>
</div>
<div class="pager-header">
 <h2>@Messages("admin.user.groups.list") <small>@Messages("admin.group.menu.list.help")</small></h2>
</div>
<ul id="userGroups" class="unstyled bordered">
@allGroups.map { group =>
  <li><input type="checkbox" value="@group.id" @{userGroups.find(x => x.groupId == group.id.get) match { case Some(x) => """checked="checked""""; case None => ;}}> @group.name</li>
}
</ul>
}
<script type="text/javascript">
YUI().use('emperor-models', 'node', function (Y) {

  Y.all('#userGroups input[type=checkbox]').on('change', function(e) {
    var model = new Y.UserGroup({
      id: e.target.get('value'),
      user_id: @user.id.get
    });
    if ( e.target.get('checked') ) {
      model.save();
    } else {
      model.destroy({ 'delete' : true });
    }
  });
});
</script>
@(group: models.Group, allUsers: List[User], userGroups: List[GroupUser])(implicit request: Request[AnyContent])
@main("GroupXXX") {
<ul class="breadcrumb">
 <li>
  <a href="@routes.Admin.index">@Messages("general.admin")</a> <span class="divider">/</span>
 </li>
 <li>
  <a href="@controllers.admin.routes.Group.index(page = 0, count = 10)">@Messages("admin.groups")</a> <span class="divider">/</span>
 </li>
 <li class="active">@group.name</li>
</ul>
<h2>@Messages("admin.group.members")</h2>
<ul id="userGroups" class="unstyled bordered">
@allUsers.map { user =>
  <li><input type="checkbox" value="@user.id" @{userGroups.find(x => x.user_id == user.id.get) match { case Some(x) => """checked="checked""""; case None => ;}}> @user.username</li>
} 
</ul>
<script type="text/javascript">
YUI({gallery: 'gallery-2012.03.23-18-00'}).use('node', 'model', 'model-list', 'gallery-model-sync-rest', function (Y) {
  UserGroupModel = Y.Base.create('UserGroup', Y.Model, [ Y.ModelSync.REST ],
    {
      url : '/admin/user/{id}/group/@group.id'
    }
  );
  
  Y.all('#userGroups input[type=checkbox]').on('change', function(e) {
    var model = new UserGroupModel({ id: @group.id });
    if ( e.target.get('checked') ) {
      model.save();
    } else {
      model.destroy({ 'delete' : true });
    }
  });
});
</script>
}
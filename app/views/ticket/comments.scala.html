@(ticket: models.FullTicket,
  links: Map[String,List[models.FullLink]],
  markdown: org.clapper.markwrap.MarkWrapParser,
  assignees: List[(String,String)],
  resolutions: List[(String,String)],
  resolveForm: Form[models.Resolution],
  assignForm: Form[models.Assignment],
  commentForm: Form[models.InitialComment],
  comments: royal.ends.Search.SearchResult[models.Comment],
  previousStatus: Option[WorkflowStatus],
  nextStatus: Option[WorkflowStatus],
  linkTypes: List[models.TicketLinkType]
)(implicit request: AuthenticatedRequest)

@import helper.bootstrap._
@import views.html.util._

@item(ticket = ticket, links = links, markdown = markdown, assignees = assignees, resolutions = resolutions, commentForm = commentForm, resolveForm = resolveForm, assignForm = assignForm, previousStatus = previousStatus, nextStatus = nextStatus, linkTypes = linkTypes) {
<div class="tabcontent">
 <div class="navbar">
  <div class="navbar-inner">
   <div class="container">
    <ul class="nav">
     <li class="active"><a href="@routes.Ticket.item("comments", id = ticket.ticketId)" class="yui3-pjax">@Messages("ticket.comment.list")</a></li>
     <li><a href="@routes.Ticket.item("history", id = ticket.ticketId)" class="yui3-pjax">@Messages("ticket.history.list")</a></li>
    </ul>
    @helper.form(action = routes.Ticket.item(tab = "comments", id = ticket.ticketId), 'class -> "navbar-search") {
     <input type="text" name="query" class="search-query" placeholder="@Messages("ticket.comment.search.placeholder")">
    }
   </div>
  </div>
 </div>
 <div class="tab-pane active" id="comments">
   <ul class="unstyled events">
    @comments.pager.items.map { comment =>
    <li>
     <blockquote>@{ Html(markdown.parseToHTML(comment.content)) }</blockquote>
     <div class="attr">@Messages("ticket.comment.attribution.prefix") <a href="XXX">@comment.realName</a> @Messages("ticket.comment.attribution.postfix", comment.dateCreated)</div>
    </li>
    }
   </ul>
   @if(comments.pager.total > comments.pager.items.size) {
   @pager(comments.pager)
   }
   <h4>@Messages("ticket.comment.add")</h4>
   @helper.form(action = routes.Ticket.comment(ticket.ticketId)) {
    <fieldset>
     @helper.textarea(field = commentForm("comment"), args = '_label -> Messages("ticket.comment"), 'class -> "span6", 'rows -> 6)
     <div class="form-actions">
      <button type="submit" class="btn btn-primary"<i class="icon-ok icon-white"></i> @Messages("form.submit")</button>
     </div>
    </fieldset>
   }
    </div>
   </div>
  }
